/*!
* jQuery Custom Select Manager function
* Copyright 2011, Ray Brooks
* Requires jQuery Core 1.4+ - http://www.jquery.com/
* Dual licensed under the MIT or GPL Version 2 licenses.
*/
(function(a){a.fn.flyweightCustomSelect=function(h){var d={},f=a.fn.flyweightCustomSelect.menu||null;var c=function(j,i){return((i%j)+j)%j};var e=function(){var y=null,s=null,t=false,A=null,i=0,m="",n=[],o=null;var r=function(){n=a.map(a(d.optionfilter,s),function(G,E){var F=a(G),D=F[0].index;if(a.browser.msie&&G.nodeName.toUpperCase()==="OPTGROUP"){D=null}return{type:G.nodeName.toUpperCase(),selectIndex:D,text:F.text(),value:F.attr("value"),group:F.attr("label")}})};var q=function(){var F=0,E='<ul class="'+d.classes.menu.list.base+'">';var D=function(G,H){return'<li><a  class="'+d.classes.menu.listitem.base+'"data-index="'+G+'" href="#">'+H+"</a></li>"};while(F<n.length){if(n[F].type==="OPTGROUP"){E+='<li class="'+d.classes.menu.group.base+'"><span>'+n[F].group+"</span><ul>";F+=1;while(F<n.length&&n[F].type!=="OPTGROUP"){E+=D(n[F].selectIndex,n[F].text);F+=1}E+="</ul></li>"}else{E+=D(n[F].selectIndex,n[F].text);F+=1}}a(A).html(E+"</ul>")};var B=function(){var D=a(y).offset();D.top+=a(y).height();A.style.left=D.left+"px";A.style.top=D.top+"px"};var j=function(){var E=a(A),D=a(s).width();if(D>E.width()){E.find("ul").width(D);if(E.find("ul").flyweightCustomSelect.hasScrollBar()){E.find("li").width(D-17)}else{E.find("li").width(D)}}};var v=function(){var D=a(A);if(D.offset().top+D.height()>a(window).height()){var E=a.browser.webkit?window.document.body:"html";a(E).animate({scrollTop:parseInt(A.style.top,10)-100},1000)}};var l=function(D){s.value=n[D].value;s.selectedIndex=n[D].selectIndex;a(y).find("span."+d.classes.placeholder.text.base).text(n[D].text);a(s).trigger("change")};var p=function(D){var E=a(A),F;l(D);F=E.find('a[data-index="'+n[D].selectIndex+'"]');E.find("ul").scrollTop(0);E.find("a").removeClass(d.classes.menu.listitem.focus);if(F.length>0){F.addClass(d.classes.menu.listitem.focus);E.find("ul").scrollTop(F.position().top)}};var C=function(D,F){var E=n.length-1;while(E>0&&n[E][D]!==F){E-=1}return E};var z=function(D,E){p(C(D,E))};var u=function(){var F=m.replace(/[\W]/ig,"").toUpperCase(),E=false,D=0;for(D=0;D<n.length;D+=1){if(n[D].text){if(n[D].text.replace(/[\W]/ig,"").substring(0,F.length).toString().toUpperCase()===F){z("text",n[D].text);D=n.length;E=true}}}window.clearTimeout(o);o=window.setTimeout(function(){m=""},1000)};var k=function(G){var E=G.target,F,D;G.preventDefault();G.stopPropagation();if(E.nodeName.toUpperCase()!=="A"){return false}l(C("selectIndex",parseInt(E.getAttribute("data-index"),10)));f.close()};var x=function(E){var D=n.length;while(D){D-=1;if(n[D].selectIndex===s.selectedIndex+E){p(D);D=0}}};var w=function(){A=window.document.createElement("div");A.className=d.classes.menu.container.base;a("body").append(A);a(A).bind("click",k)};w();return{open:function(E,D){y=E;s=D;r();q();B();j();v();i=C("selectIndex",s.selectedIndex);p(i);a(A).addClass(d.classes.menu.container.open);a(y).addClass(d.classes.placeholder.container.open);t=true;m="";window.clearTimeout(o)},close:function(){a(A).removeClass(d.classes.menu.container.open);a(y).removeClass(d.classes.placeholder.container.open);t=false},destroy:function(){a(A).unbind();a(A).remove()},reset:function(){p(i);this.close()},visible:function(){return t},enabled:function(){return true},scrollDown:function(){x(1)},scrollUp:function(){x(-1)},search:function(D){m+=D;u()},getSelect:function(){return s}}};var g=function(j){var s="",t,r=true;var p=function(v){v.stopPropagation();v.preventDefault();if(r){if(!f.visible()){f.open(this,j)}else{f.close();if(f.getSelect()!==j){f.open(this,j)}}}};var k=function(v){if(v.which===d.keymap.left||v.keyCode===d.keymap.right||v.keyCode===d.keymap.up||v.keyCode===d.keymap.down||v.keyCode===d.keymap.enter||v.keyCode===d.keymap.space){v.stopPropagation();v.preventDefault()}switch(true){case (v.which===d.keymap.left):case (v.which===d.keymap.up):if(!f.visible()){a(this).trigger("click")}else{f.scrollUp()}break;case (v.which===d.keymap.right):case (v.which===d.keymap.down):if(!f.visible()){a(this).trigger("click")}else{f.scrollDown()}break;case (v.which===d.keymap.enter):case (v.which===d.keymap.tab):case (v.which===d.keymap.space):if(v.which===d.keymap.enter||v.which===d.keymap.space){a(this).trigger("click")}else{f.close()}break;case (v.which===d.keymap.escape):f.reset();break;case (v.which>=48&&v.which<=59):case (v.which>=65&&v.which<=90):case (v.which>=97&&v.which<=122):if(!f.visible()){a(this).trigger("click")}f.search(String.fromCharCode(v.which));break}};var q=function(v){a(this).addClass(d.classes.placeholder.container.focus)};var i=function(v){a(this).removeClass(d.classes.placeholder.container.focus)};var n=function(v){a(this).addClass(d.classes.placeholder.container.hover)};var o=function(v){a(this).removeClass(d.classes.placeholder.container.hover)};var m=function(){a(j).removeAttr("disabled");!(a(j).attr("tabindex")&&d.tabindex)||t.attr("tabindex",a(j).attr("tabindex"));t.removeClass(d.classes.placeholder.container.disabled);t.click(p);t.keydown(k);t.unbind("focus").focus(q);t.blur(i);t.hover(n,o)};var l=function(){a(j).attr("disabled","disabled");!d.tabindex||t.removeAttr("tabindex");t.addClass(d.classes.placeholder.container.disabled);t.unbind("click");t.unbind("keydown");t.unbind("focus").focus(function(){this.blur()});t.unbind("blur");t.unbind("mouseover");t.unbind("mouseout")};var u=function(){var v=j.options[j.selectedIndex].text;t=a('<a href="#" aria-owns="'+j.id+'" class="'+d.classes.placeholder.container.base+'" role="button" href="#" aria-haspopup="true" id="'+j.id+'-button"><span class="'+d.classes.placeholder.text.base+'">'+v+'</span><span class="'+d.classes.placeholder.arrow.base+'"></span></a>');m();a(j).after(t);a(j).hide();return t[0]};u();return{enable:function(){m()},disable:function(){l()},destroy:function(){t.unbind();t.remove();a(j).removeAttr("disabled").show()}}};var b={init:function(i){d=a.extend({},a.fn.flyweightCustomSelect.settings,i);if(f===null){f=a.fn.flyweightCustomSelect.menu=new e();a(document).click(function(){if(f.visible()){f.reset()}})}f.close();return this.each(function(){if(!a(this).data("placeHolder")){a(this).data("placeHolder",new g(this))}})},destroy:function(){f.destroy();f=a.fn.flyweightCustomSelect.menu=null;return this.each(function(){a(this).data("placeHolder").destroy();a(this).data("placeHolder",null)})},enable:function(){return this.each(function(){a(this).data("placeHolder").enable()})},disable:function(){return this.each(function(){a(this).data("placeHolder").disable()})}};if(b[h]){return b[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof h==="object"||!h){return b.init.apply(this,arguments)}else{a.error("Method "+h+" does not exist on jQuery.flyweightCustomSelect")}}};
/*!
	 * hasScrollBar function
	 * Adapted from code
	 * Copyright 2011, Pravee Prasad
	 * See http://stackoverflow.com/users/183200/praveen-prasad http://stackoverflow.com/questions/2059743/detect-elements-overflow-using-jquery/2060003#2060003
	 */
a.fn.flyweightCustomSelect.hasScrollBar=function(){var c=this;var b=false;if((c.clientHeight<c.scrollHeight)||(c.clientWidth<c.scrollWidth)){b=true}return b};a.fn.flyweightCustomSelect.settings={classes:{placeholder:{container:{base:"fwselect",open:"fwselect-open",hover:"fwselect-hover",focus:"fwselect-focus",disabled:"fwselect-disabled"},text:{base:"fwselect-text"},arrow:{base:"fwselect-arrow"}},menu:{container:{base:"fwselect-menu",open:"fwselect-menu-open"},list:{base:"fwselect-menu-list"},listitem:{base:"fwselect-menu-listitem",focus:"fwselect-menu-listitem-focus",hover:"fwselect-menu-listitem-hover"},group:{base:"fwselect-menu-group"}}},optionfilter:"option,optgroup",tabindex:false,keymap:{left:37,right:39,up:38,down:40,enter:13,space:32,tab:9,escape:27}}}(jQuery));